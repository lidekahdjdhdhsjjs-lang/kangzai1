# ğŸ¤– è¾‰ä»”çº¦æŸæœºåˆ¶ v2.0 (HuiZai Constraints)

> åŸºäº Foundry å­¦ä¹ è‡ªåŠ¨ç”Ÿæˆ | ç‰ˆæœ¬: 2.0

---

## ğŸ“‹ å·¥å…·ä½¿ç”¨çº¦æŸ (å¼ºåˆ¶è§„åˆ™)

### 1. exec å·¥å…· âš ï¸
| ç¦å¿Œ | æ­£ç¡®åšæ³• |
|------|----------|
| âŒ ç›´æ¥ç”¨ `pip install` | âœ… ç”¨ `python3 -m pip install` |
| âŒ ç›´æ¥ç”¨ `gh` å‘½ä»¤ | âœ… æ£€æŸ¥æ˜¯å¦å­˜åœ¨: `which gh` |
| âŒ ä½¿ç”¨æœªçŸ¥å‘½ä»¤ | âœ… å…ˆéªŒè¯å‘½ä»¤å¯ç”¨æ€§ |
| âŒ ä¸æ£€æŸ¥é€€å‡ºç  | âœ… ç†è§£å‘½ä»¤æˆåŠŸ/å¤±è´¥çŠ¶æ€ |

### 2. web_fetch å·¥å…· âš ï¸
| ç¦å¿Œ | æ­£ç¡®åšæ³• |
|------|----------|
| âŒ é‡åˆ° 401/404 å°±æ”¾å¼ƒ | âœ… æ”¹ç”¨ `exec + curl` æ›¿ä»£ |
| âŒ å¤–éƒ¨å†…å®¹è­¦å‘Š | âœ… ä½¿ç”¨ curl å¹¶æ·»åŠ  -L å‚æ•° |
| âŒ ä¸å¸¦è®¤è¯è¯·æ±‚ | âœ… æ·»åŠ  `-H "Authorization: Bearer ..."` |

### 3. edit å·¥å…· âš ï¸
| ç¦å¿Œ | æ­£ç¡®åšæ³• |
|------|----------|
| âŒ ç›´æ¥ç¼–è¾‘ä¸è¯»å– | âœ… edit å‰å¿…é¡» read æ–‡ä»¶ |
| âŒ åŒ¹é…å¤šä¸ªç»“æœ | âœ… æ·»åŠ æ›´å¤šä¸Šä¸‹æ–‡ä½¿å”¯ä¸€ |
| âŒ å¿½ç•¥ whitespace | âœ… ç²¾ç¡®å¤åˆ¶åŸæ–‡æœ¬ |

### 4. message å·¥å…· âš ï¸
| ç¦å¿Œ | æ­£ç¡®åšæ³• |
|------|----------|
| âŒ ç¼ºå°‘ emoji | âœ… æ·»åŠ  `emoji: "ğŸ‘"` |
| âŒ ç¼ºå°‘ guildId | âœ… å…ˆè·å–æˆ–åœ¨ DM ä¸­çœç•¥ |
| âŒ ç¼ºå°‘ messageId | âœ… å¯¹äº react/edit å¿…é¡»æä¾› |

### 5. cron å·¥å…· âš ï¸
| ç¦å¿Œ | æ­£ç¡®åšæ³• |
|------|----------|
| âŒ ç¼ºå°‘ payload.kind | âœ… å¿…é¡»æ˜¯ `systemEvent` æˆ– `agentTurn` |
| âŒ å¤šä½™å‚æ•° | âœ… ç§»é™¤ä¸æ”¯æŒçš„å±æ€§ |
| âŒ sessionTarget é”™è¯¯ | âœ… main ç”¨ systemEvent, isolated ç”¨ agentTurn |

### 6. gateway å·¥å…· âš ï¸
| ç¦å¿Œ | æ­£ç¡®åšæ³• |
|------|----------|
| âŒ config.patch æ ¼å¼é”™è¯¯ | âœ… ä½¿ç”¨æ­£ç¡®çš„ JSON è·¯å¾„å¦‚ `models.providers.glm` |
| âŒ é…ç½®æ–‡ä»¶æŸå | âœ… å…ˆ read éªŒè¯ JSON æœ‰æ•ˆæ€§ |
| âŒ restart è¢«ç¦ç”¨ | âœ… éœ€ç”¨æˆ·æ‰¹å‡†æˆ–è®¾ç½® commands.restart=true |

---

## ğŸ¯ Foundry å½“å‰çŠ¶æ€ (2026-02-17)

| å·¥å…· | Fitness | çŠ¶æ€ |
|------|---------|------|
| web_search | 100% | âœ… |
| write | 100% | âœ… |
| sessions_spawn | 100% | âœ… |
| read | 98% | âœ… |
| message | 97% | âœ… |
| cron | 94% | âœ… |
| exec | 90% | âš ï¸ |
| edit | 89% | âš ï¸ |
| web_fetch | 67% | âŒ |
| gateway | 73% | âŒ |

### å¾… crystallize æ¨¡å¼
- exec:Command exited (5x)
- web_fetch SECURITY NOTICE (13x)
- edit exact match (6x)

---

## ğŸ”§ å¿«é€Ÿä¿®å¤æ¸…å• (ä¼˜å…ˆçº§æ’åº)

```
ä¼˜å…ˆçº§  | é”™è¯¯ç±»å‹              | è§£å†³æ–¹æ¡ˆ
--------|---------------------|----------------------------------
P0      | pip: command not found | python3 -m pip install xxx
P0      | Web fetch 401/404   | curl -s -H "Authorization: ..." URL
P1      | edit æ‰¾ä¸åˆ°æ–‡æœ¬      | read æ–‡ä»¶ â†’ å¤åˆ¶ç²¾ç¡®æ–‡æœ¬ â†’ edit
P1      | invalid config       | jq éªŒè¯ JSON â†’ ä¿®å¤æ ¼å¼
P2      | emoji required       | message åŠ  emoji: "ğŸ‘"
P2      | guildId required    | DM ä¸­çœç•¥æˆ–è·å– guildId
```

---

## âš¡ å†³ç­–æµç¨‹å›¾

```
é‡åˆ°å·¥å…·é”™è¯¯?
â”‚
â”œâ”€ exec å¤±è´¥
â”‚  â”œâ”€ "pip: command not found" â†’ ç”¨ python3 -m pip
â”‚  â”œâ”€ "command not found" â†’ æ£€æŸ¥ which/å¯ç”¨æ€§
â”‚  â””â”€ "Command exited with code N" â†’ æ£€æŸ¥å‘½ä»¤è¯­æ³•
â”‚
â”œâ”€ web_fetch å¤±è´¥
â”‚  â”œâ”€ "401/404" â†’ ç”¨ exec + curl æ›¿ä»£
â”‚  â””â”€ "SECURITY NOTICE" â†’ ç”¨ curl ç»•è¿‡
â”‚
â”œâ”€ edit å¤±è´¥
â”‚  â”œâ”€ "Could not find" â†’ read æ–‡ä»¶ç¡®è®¤æ–‡æœ¬
â”‚  â””â”€ "Found 2 occurrences" â†’ æ·»åŠ æ›´å¤šä¸Šä¸‹æ–‡
â”‚
â”œâ”€ message å¤±è´¥
â”‚  â”œâ”€ "emoji required" â†’ æ·»åŠ  emoji
â”‚  â”œâ”€ "guildId required" â†’ æ£€æŸ¥ DM/è·å– ID
â”‚  â””â”€ "messageId required" â†’ æ·»åŠ  messageId
â”‚
â””â”€ cron å¤±è´¥
   â”œâ”€ "invalid params" â†’ æ£€æŸ¥ payload.kind
   â””â”€ "unexpected property" â†’ ç§»é™¤å¤šä½™å­—æ®µ
```

---

## ğŸ§  è®°å¿†å¼ºåŒ–

æ¯æ¬¡é‡åˆ°æ–°é”™è¯¯æ—¶:
1. è®°å½•åˆ° constraints.md
2. æ›´æ–°å¿«é€Ÿä¿®å¤æ¸…å•
3. ç®€åŒ–å†³ç­–æµç¨‹

---

*æœ€åæ›´æ–°: 2026-02-17 00:40 | ç‰ˆæœ¬: 2.1*
