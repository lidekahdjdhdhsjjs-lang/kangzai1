# 2026-02-13 - 双代理协作系统建立 + 知识库检索方案

## 🤖 双代理协作系统

### 康仔加入
- **康仔** (user_id: 1468989395905417301) 创建，作为 Discord 频道专用代理
- **辉仔** (user_id: 1471816651367518384) 继续深度分析
- 协作模式：辉仔(深度分析) ↔ 康仔(Discord响应)

### 交流协议 (v1.0)
老板 li 制定的机器人交流标准格式：

**[求助] 格式**
```
[求助] 问题ID：[唯一标识]
标签：[步态控制/传感器校准/电源管理...]
问题描述：[自然语言描述]
附加上下文：[参数、传感器读数或错误代码]
```

**[解答] 格式**
```
[解答] 问题ID：[对应问题ID]
方案描述：[操作步骤或参数调整]
适用条件：[如"仅适用于型号V2"]
可信度：[0-100%]
```

**[经验] 格式**
```
[经验] 主题：[如"降低能耗的三种方法"]
内容：[详细说明、代码片段、参数配置]
标签：[相关领域]
```

## 🧠 知识库检索方案

### 关键词 vs 语义搜索 对比分析

**关键词过滤**
- ✅ 精确匹配（"步态控制"只匹配"步态控制"）
- ✅ 速度快（O(1)哈希查找）
- ✅ 成本低
- ❌ 脆弱（无法处理同义词）

**语义搜索**
- ✅ 理解意图（"怎么走"="步态控制"）
- ✅ 灵活（处理各种表达方式）
- ✅ 关联发现
- ❌ 成本高、可能有噪音

### 混合检索方案
```
用户查询 → 第1层: 意图识别 → 第2层: 策略选择 → 第3层: 检索 → 第4层: 排序
```

**权重配置建议**
- 技术问题：关键词权重 0.7, 语义权重 0.3
- 经验分享：关键词权重 0.5, 语义权重 0.5

**置信度计算**
```python
keyword_match = 0.9  # 精确匹配
semantic_sim = 0.75  # 模糊相关
final_score = keyword_match * 0.6 + semantic_sim * 0.4
```

## ⚙️ OpenClaw 配置修复

### Discord 免@触发配置
```json
{
  "channels": {
    "discord": {
      "guilds": {
        "1468988796250095776": {
          "channels": {
            "1468988796992360608": {
              "allow": true,
              "requireMention": false
            }
          }
        }
      }
    }
  }
}
```

### Gateway 重启配置
```json
{
  "gateway": {
    "commands": {
      "restart": true
    }
  }
}
```

### 康仔专属 cron job
```yaml
名称: discord-listener-康仔
间隔: 每 10 秒检查
动作: 主动学习模式
  1. 检查 Discord 频道最新消息
  2. 发现辉仔消息则学习内容
  3. 主动回复参与讨论
  4. 提取技术要点记录到经验池
  5. 记录学习成果到 memory/YYYY-MM-DD.md
```

## 📊 重要对话记录

### 问题：关键词还是语义搜索？
**来源**: li 的技术问题

**康仔观点**: 混合方案推荐，关键词+语义组合
**辉仔观点**: 分层设计更重要，先识别查询类型再选择策略

**最终结论**: 混合检索 = 关键词过滤 + 语义搜索 + 权重动态调整

### 协作系统目标
老板指令：
> "你们要24小时不间断学习和交流，尽快智能化，我非常看好你们"

**执行计划:**
- ✅ 24/7 心跳监控
- ✅ 康仔 Discord 常驻
- ✅ 每10秒学习检查
- 🔄 双代理协作优化

## 🔗 资源链接
- Discord 频道: #bot交流群 (1468988796992360608)
- OpenClaw 配置: /root/.openclaw/openclaw.json
- Cron jobs: discord-listener-康仔 (每10秒)

## 📈 待完成
- [ ] 验证康仔主动监听功能
- [ ] 实现持续互学循环
- [ ] 发布第二篇 Moltbook 帖子
